TRAFFIC JAM SLOT - ПРАВИЛА ИГРЫ
================================

ОБЩАЯ ИНФОРМАЦИЯ
----------------
Название игры: Traffic Jam Slot
Тип игры: Слотовая игра
Размер матрицы: 5 линий (rows) x 3 барабана (reels)
Общее количество ячеек: 15

СИМВОЛЫ ИГРЫ
------------
В игре используется 12 различных символов-машин, которые различаются по:
- Цвету: Blue (Синий), Green (Зеленый), Red (Красный), Yellow (Желтый)
- Типу кузова: Akira, Arizona, Hilda

Полный список символов:
1. BlueAkira
2. BlueArizona
3. BlueHilda
4. GreenAkira
5. GreenArizona
6. GreenHilda
7. RedAkira
8. RedArizona
9. RedHilda
10. YellowAkira
11. YellowArizona
12. YellowHilda

ПРАВИЛА ВЫИГРЫШНЫХ КОМБИНАЦИЙ
------------------------------

Игра использует систему выигрышных линий. Выигрышные комбинации формируются 
слева направо на активных линиях.

Существует три типа выигрышных комбинаций:

1. КОМБИНАЦИИ ПО ЦВЕТУ (Color Match)
   --------------------------------
   Выигрышная комбинация формируется, когда на линии совпадают машины 
   одного цвета, независимо от типа кузова.
   
   Примеры:
   - BlueAkira, BlueArizona, BlueHilda (3 синие машины разных типов)
   - GreenAkira, GreenAkira, GreenHilda (3 зеленые машины)
   - RedArizona, RedAkira, RedArizona (3 красные машины)
   - YellowHilda, YellowAkira, YellowArizona (3 желтые машины)

2. КОМБИНАЦИИ ПО ТИПУ КУЗОВА (Body Type Match)
   -------------------------------------------
   Выигрышная комбинация формируется, когда на линии совпадают машины 
   одного типа кузова, независимо от цвета.
   
   Примеры:
   - BlueAkira, GreenAkira, RedAkira (3 машины типа Akira разных цветов)
   - BlueArizona, YellowArizona, GreenArizona (3 машины типа Arizona)
   - RedHilda, BlueHilda, YellowHilda (3 машины типа Hilda)

3. КОМБИНАЦИИ ПО ЦВЕТУ И ТИПУ КУЗОВА (Full Match) - ПРЕМИУМНЫЕ
   -----------------------------------------------------------
   Выигрышная комбинация формируется, когда на линии совпадают машины 
   одного цвета И одного типа кузова одновременно.
   
   Это самые ценные комбинации с максимальными выплатами.
   
   Примеры:
   - BlueAkira, BlueAkira, BlueAkira (3 одинаковые синие Akira)
   - GreenArizona, GreenArizona, GreenArizona (3 одинаковые зеленые Arizona)
   - RedHilda, RedHilda, RedHilda (3 одинаковые красные Hilda)
   - YellowAkira, YellowAkira, YellowAkira (3 одинаковые желтые Akira)

ПРИОРИТЕТ ВЫИГРЫШЕЙ
-------------------
Если на одной линии одновременно может быть несколько типов комбинаций, 
применяется следующее правило приоритета:
1. Полное совпадение (Full Match) - цвет И тип кузова
2. Совпадение по типу кузова (Body Type Match)
3. Совпадение по цвету (Color Match)

То есть, если на линии выпали 3 одинаковые машины (например, 3x BlueAkira),
то засчитывается только премиальная комбинация Full Match, а не комбинации 
по цвету или типу кузова отдельно.

МИНИМАЛЬНАЯ КОМБИНАЦИЯ
----------------------
Минимальная выигрышная комбинация состоит из 3 символов на одной линии.
Это применимо как для горизонтальных, так и для вертикальных линий.

МАКСИМАЛЬНАЯ КОМБИНАЦИЯ
-----------------------
Максимальная выигрышная комбинация зависит от типа линии:
- Горизонтальные линии: 3 символа (все 3 барабана)
- Вертикальные линии: 5 символов (все 5 строк в столбце)

Вертикальные линии предоставляют возможность более крупных выигрышей 
благодаря возможности совпадения всех 5 символов в столбце.

ВЫИГРЫШНЫЕ ЛИНИИ
----------------
Игра использует систему выигрышных линий двух типов:

1. ГОРИЗОНТАЛЬНЫЕ ЛИНИИ (Horizontal Lines)
   ----------------------------------------
   Классические линии слева направо по строкам матрицы.
   Всего 5 горизонтальных линий (по количеству строк).
   
   Горизонтальные линии:
   - Линия 1: ячейки 0, 1, 2 (верхняя строка)
   - Линия 2: ячейки 3, 4, 5
   - Линия 3: ячейки 6, 7, 8 (центральная строка)
   - Линия 4: ячейки 9, 10, 11
   - Линия 5: ячейки 12, 13, 14 (нижняя строка)
   
   Направление проверки: слева направо
   Максимальная комбинация: 3 символа (все 3 барабана)

2. ВЕРТИКАЛЬНЫЕ ЛИНИИ (Vertical Lines)
   ------------------------------------
   Дополнительные линии сверху вниз по столбцам матрицы.
   Всего 3 вертикальные линии (по количеству столбцов/барабанов).
   
   Вертикальные линии:
   - Вертикальная линия 1: ячейки 0, 3, 6, 9, 12 (левый столбец)
   - Вертикальная линия 2: ячейки 1, 4, 7, 10, 13 (центральный столбец)
   - Вертикальная линия 3: ячейки 2, 5, 8, 11, 14 (правый столбец)
   
   Направление проверки: сверху вниз
   Максимальная комбинация: 5 символов (все 5 строк в столбце)
   
   Правила совпадения для вертикальных линий идентичны горизонтальным:
   - Комбинации по цвету (Color Match)
   - Комбинации по типу кузова (Body Type Match)
   - Комбинации по цвету И типу кузова (Full Match) - премиальные
   
   Примеры вертикальных комбинаций:
   - 5 синих машин разных типов (Color Match)
   - 5 машин типа Akira разных цветов (Body Type Match)
   - 5 одинаковых машин BlueAkira (Full Match) - максимальный выигрыш

ОБЩЕЕ КОЛИЧЕСТВО ЛИНИЙ
----------------------
Всего в игре доступно 8 выигрышных линий:
- 5 горизонтальных линий (индексы 1-5)
- 3 вертикальные линии (индексы 6-8)

ПОЛНЫЙ СПИСОК ВЫИГРЫШНЫХ ЛИНИЙ
-------------------------------
Все линии пронумерованы для удобства выбора игроком:

ГОРИЗОНТАЛЬНЫЕ ЛИНИИ:
---------------------
Линия 1: ячейки [0, 1, 2] - верхняя строка
Линия 2: ячейки [3, 4, 5] - вторая строка
Линия 3: ячейки [6, 7, 8] - центральная строка
Линия 4: ячейки [9, 10, 11] - четвертая строка
Линия 5: ячейки [12, 13, 14] - нижняя строка

ВЕРТИКАЛЬНЫЕ ЛИНИИ:
-------------------
Линия 6: ячейки [0, 3, 6, 9, 12] - левый столбец
Линия 7: ячейки [1, 4, 7, 10, 13] - центральный столбец
Линия 8: ячейки [2, 5, 8, 11, 14] - правый столбец

СИСТЕМА СТАВОК И ВЫБОРА ЛИНИЙ
------------------------------
Игра использует систему ставок с возможностью выбора количества активных линий.

СТАВКА (BET):
-------------
- Ставка - это сумма, которую игрок ставит на ОДНУ линию
- Ставка умножается на количество активных линий для получения общей ставки за спин
- Пример: если ставка = 20, а активных линий = 5, то общая ставка = 20 × 5 = 100

ВЫБОР КОЛИЧЕСТВА ЛИНИЙ:
-----------------------
Игрок может выбрать количество активных линий из доступных вариантов.

ВАРИАНТ 1: ВЫБОР ИЗ ПРЕДУСТАНОВЛЕННЫХ ВАРИАНТОВ (РЕКОМЕНДУЕМЫЙ)
---------------------------------------------------------------
Игрок выбирает количество линий из списка: [1, 3, 5, 8]

Варианты выбора:
- 1 линия: только центральная горизонтальная линия (линия 3)
- 3 линии: горизонтальные линии 1, 3, 5 (верхняя, центральная, нижняя)
- 5 линий: все горизонтальные линии (линии 1-5)
- 8 линий: все линии - горизонтальные и вертикальные (линии 1-8)

Порядок активации линий при выборе:
- 1 линия: линия 3 (центральная горизонтальная)
- 3 линии: линии 1, 3, 5 (симметричные горизонтальные)
- 5 линий: линии 1, 2, 3, 4, 5 (все горизонтальные)
- 8 линий: линии 1, 2, 3, 4, 5, 6, 7, 8 (все линии)

ВАРИАНТ 2: ВСЕГДА ВСЕ ЛИНИИ (АЛЬТЕРНАТИВНЫЙ)
---------------------------------------------
Альтернативный вариант: всегда проверять все 8 линий независимо от выбора игрока.
В этом случае игрок выбирает только ставку на линию, а количество линий фиксировано = 8.

ПРИМЕРЫ РАСЧЕТА СТАВОК:
-----------------------
Пример 1 (Вариант 1):
- Ставка на линию: 20
- Количество линий: 5
- Общая ставка за спин: 20 × 5 = 100

Пример 2 (Вариант 1):
- Ставка на линию: 20
- Количество линий: 8
- Общая ставка за спин: 20 × 8 = 160

Пример 3 (Вариант 2):
- Ставка на линию: 20
- Количество линий: 8 (фиксировано)
- Общая ставка за спин: 20 × 8 = 160

РАСЧЕТ ВЫИГРЫШЕЙ:
-----------------
Выигрыш рассчитывается следующим образом:
1. Для каждой активной линии проверяется наличие выигрышной комбинации
2. Выигрыш по каждой линии = выплата из таблицы × ставка на линию
3. Общий выигрыш = сумма выигрышей по всем активным линиям

Пример:
- Ставка на линию: 20
- Активных линий: 5
- Выигрыш на линии 1: 50 × 20 = 1000
- Выигрыш на линии 3: 30 × 20 = 600
- Выигрыш на линии 5: 0 (нет комбинации)
- Выигрыш на линии 2: 0 (нет комбинации)
- Выигрыш на линии 4: 0 (нет комбинации)
- Общий выигрыш: 1000 + 600 = 1600

РЕКОМЕНДАЦИЯ ПО РЕАЛИЗАЦИИ:
---------------------------
Рекомендуется использовать ВАРИАНТ 1 с выбором из вариантов [1, 3, 5, 8]:
- Дает игроку контроль над размером ставки
- Позволяет играть с меньшим риском (меньше линий = меньше ставка)
- Максимальный вариант (8 линий) дает доступ ко всем возможностям игры
- Соответствует стандартной механике слотовых игр

ТАБЛИЦА ВЫПЛАТ
-------------
Выплаты зависят от типа комбинации и количества совпавших символов:

[Таблица выплат будет определена при реализации игры]

ГОРИЗОНТАЛЬНЫЕ ЛИНИИ (3 символа максимум):
ТИП КОМБИНАЦИИ          | 3 символа
------------------------|----------
Full Match (цвет+кузов) | [TBD]
Body Type Match         | [TBD]
Color Match             | [TBD]

ВЕРТИКАЛЬНЫЕ ЛИНИИ (5 символов максимум):
ТИП КОМБИНАЦИИ          | 3 символа | 4 символа | 5 символов
------------------------|-----------|-----------|-----------
Full Match (цвет+кузов) | [TBD]     | [TBD]     | [TBD]
Body Type Match         | [TBD]     | [TBD]     | [TBD]
Color Match             | [TBD]     | [TBD]     | [TBD]

Примечание: TBD (To Be Determined) - будет определено при реализации

Вертикальные линии имеют более высокий потенциал выигрыша благодаря 
возможности совпадения 4 или 5 символов, что недоступно для горизонтальных линий.

ТЕХНИЧЕСКИЕ ДЕТАЛИ
------------------
- Матрица игры: 5 строк x 3 столбца = 15 ячеек
- Индексация ячеек: от 0 до 14
  Строка 1: ячейки 0, 1, 2
  Строка 2: ячейки 3, 4, 5
  Строка 3: ячейки 6, 7, 8
  Строка 4: ячейки 9, 10, 11
  Строка 5: ячейки 12, 13, 14

- Направление проверки комбинаций:
  * Горизонтальные линии: слева направо
  * Вертикальные линии: сверху вниз
- Минимальное количество символов для выигрыша: 3
- Максимальное количество символов для выигрыша:
  * Горизонтальные линии: 3 символа
  * Вертикальные линии: 5 символов

ДОПОЛНИТЕЛЬНЫЕ ПРАВИЛА
----------------------
- Каждая выигрышная линия (горизонтальная или вертикальная) проверяется независимо
- На одной линии может быть только одна выигрышная комбинация 
  (выбирается по приоритету)
- Если на линии нет выигрышной комбинации, она не засчитывается
- Все выплаты умножаются на ставку на линию (Bet)
- Горизонтальные и вертикальные линии могут выигрывать одновременно
- Одна и та же ячейка может участвовать в нескольких выигрышных линиях
  (например, центральная ячейка 7 может быть частью горизонтальной линии 3
   и вертикальной линии 2 одновременно)
- Проверяются только активные линии (выбранные игроком)
- Неактивные линии не проверяются и не участвуют в расчете выигрыша

РЕАЛИЗУЕМОСТЬ ВЕРТИКАЛЬНЫХ ЛИНИЙ
---------------------------------
Вертикальные линии полностью реализуемы в существующей архитектуре игры:
- Вертикальные линии добавляются как дополнительные объекты Line
- Правила совпадения символов идентичны горизонтальным линиям
- Проверка выигрышей выполняется по тому же алгоритму
- Вертикальные линии предоставляют дополнительный потенциал выигрыша
  благодаря возможности совпадения 4-5 символов вместо 3

